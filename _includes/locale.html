<div class="language-selector d-block mt-1 text-right">
    {% assign parent = page.url | split: '/' | last %}
    {% assign lang_i18n = site.data.i18n[page.lang].pages.index.sidebar.lang_section %}
    {% for lang in site.languages %}
        {% assign lang_prefix = 'lang_' | append: lang %}
        {% assign lang_title = lang_i18n[lang_prefix].title %}

        {% if lang == 'ru' %}
            {% assign flag = 'ğŸ‡·ğŸ‡º' %}
        {% elsif lang == 'en' %}
            {% assign flag = 'ğŸ‡ºğŸ‡¸' %}
        {% elsif lang == 'de' %}
            {% assign flag = 'ğŸ‡©ğŸ‡ª' %}
        {% endif %}

        {% if site.languages contains parent %}
            <a title="{{ lang_title }}" class="site-language" href="/{{ lang | prepend: site.baseurl_root }}/">{{ flag }}</a>
        {% else %}
            <a title="{{ lang_title }}" class="site-language" href="/{{ lang | prepend: site.baseurl_root }}/{{parent}}/">{{ flag }}</a>
        {% endif %}

    {% endfor %}
</div>